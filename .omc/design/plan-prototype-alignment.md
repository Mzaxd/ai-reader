# 计划-原型对齐清单

更新时间：2026-02-17
范围：`.omc/plans/ai-reader-development-plan.md` 对齐 `.omc/design`

## 已对齐（Prototype 已覆盖）

1. Step 2 文件导入与阅读器核心
- 书库导入支持计划内格式：`EPUB/TXT/DOC/DOCX/MOBI/AZW(P1)`
- 导入校验链路完整可视化：`文件大小 >50MB 警告`、`编码检测 UTF-8/GBK/GB2312`、`元数据提取`、`分块索引+向量化`
- 导入任务进度状态：`Ready/Running/Done/Failed`
- 书库管理：搜索、排序、删除、阅读历史、阅读进度、书签计数
- 阅读器核心：章节导航、书签、进度、字体/字号/行距/宽度/主题

2. Step 3 AI 配置/RAG/成本/离线
- Settings 页覆盖 Provider 配置：OpenAI/Claude/Ollama(P1)
- `safeStorage` 加密存储语义提示
- 参数配置：`temperature/max_tokens/context`
- 检索策略配置：`Hybrid/Vector/Fulltext`
- 预算与成本控制：日/月/单次阈值、用量展示、高成本确认入口
- 离线能力：DNS 检测文案、离线队列、手动重试

3. Step 4/5/6 分析能力
- 人物关系：人物列表、别名编辑、关系图、关系强度、手动修正、JSON 导出
- 时间线：筛选、搜索、手动编辑、原文跳转、水平/垂直切换、缩放
- 事件分析：事件分级、因果链、章节事件概览、阅读联动、导出入口

4. Step 7 问答优化
- 问答页包含 `Q&A/人物/时间线/事件/模板/历史` 六标签
- 引用定位与跳转
- 混合检索语义（向量+全文）
- 模板与历史：搜索、导出

5. Step 8 体验优化（UI 层）
- 快捷键：发送、书签、帮助、AI 面板收起
- 拖拽导入、自动保存状态、离线提示
- 暗黑模式支持
- Electron 桌面语义：标题栏 `-webkit-app-region` 拖拽区处理

## 已删除（计划外内容）

1. 已移除不在当前计划范围的原型内容
- Command Palette
- PDF 导入入口（计划里是后续迭代，不在当前核心原型）
- 与计划无关的分栏拖拽/炫技型控件

## 计划缺少但开发需要补充的规范（建议补到计划）

1. 交互优先级定义
- 建议补充：`AI 面板收起后的最小宽度/恢复行为` 标准

2. 导入失败错误码到 UI 映射
- 计划有 `ErrorCode`，建议补 UI 映射表（如 `UNSUPPORTED_FORMAT/FILE_TOO_LARGE` 对应文案与按钮）

3. 组件验收口径
- 建议补充每类组件的最小验收：空态/加载态/错误态/离线态

## 当前剩余差距

1. 本轮原型层面无阻塞缺口
- 当前页面已可作为前端开发基准，按 Step 2~8 顺序推进实现即可。
